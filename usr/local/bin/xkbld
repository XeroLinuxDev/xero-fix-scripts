#!/bin/bash
#set -e
##################################################################################################################
# Written to be used on 64 bits computers
# Author 	: 	DarkXero
# Website 	: 	http://xerolinux.xyz
##################################################################################################################
echo
tput setaf 3
echo "###############################################################################"
echo "#                            XeroLinux ISO Builder                            #"
echo "#                               (By keyaedisa)                                #"
echo "#                                                                             #"
echo "#                              !!! ATTENTION !!!                              #"
echo "#                                                                             #"
echo "#            This Script Will Help You Clone Build Repo & Build ISO           #"
echo "#  Only Intended to be used by experienced users with enough Linux Knowledge  #"
echo "#                                                                             #"
echo "#               Do *NOT* use unless you know what you are doing               #"
echo "###############################################################################"
tput sgr0
echo
echo "Select Steps in order."
echo
echo "########## Available Steps ##########"
echo
echo "1.  Git Clone XeroLinux Build Repo."
echo "2.  Install XeroLinux Mirrorlist (For Build)."
echo "3.  Build XeroLinux ISO (Will take some time)."
echo
echo "Type Your Selection. To Exit, just close Window."
echo

while :; do

read CHOICE

case $CHOICE in

    1 )
      echo
      echo "##########################################"
      echo "       Cloning XeroLinux Build Repo       "
      echo "##########################################"
	    sleep 3
	    cd ~ && git clone https://github.com/xerolinux/xero_iso.git
	    sleep 3
      echo "#######################################"
      echo "                 Done !                "
      echo "#######################################"
            clear && sh xero-build.sh
      ;;

    2 )
      echo
      echo "##########################################"
      echo "      Grabbing XeroLinux Mirrorlist       "
      echo "##########################################"
        sleep 3
	    cd /etc/pacman.d/
	    sudo wget https://raw.githubusercontent.com/xerolinux/xerolinux-mirrorlist/main/etc/pacman.d/xero-mirrorlist
	    sleep 3
      echo "#######################################"
      echo "                 Done !                "
      echo "#######################################"
            clear && sh clear && sh xero-build.sh
      ;;

    3 )
      echo
      echo "##########################################"
      echo "          Builing XeroLinux ISO           "
      echo "##########################################"
	    sleep 3
	    cd $HOME/xero_iso/build-scripts/
	    sh rebuild.sh
	    sleep 3
      echo "#######################################"
      echo "                 Done !                "
      echo "#######################################"
            clear && sh clear && sh xero-build.sh

      ;;

    * )
      echo "#################################"
      echo "    Choose the correct number    "
      echo "#################################"
      ;;
esac
done
